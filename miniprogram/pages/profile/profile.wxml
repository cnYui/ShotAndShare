<!-- 个人设置页面 -->
<view class="profile-container">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="user-avatar">
      <image src="{{userInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill" />
      <view class="avatar-edit" bindtap="editAvatar">
        <image src="/images/icon-camera.png" />
      </view>
    </view>
    <view class="user-info">
      <view class="user-name">{{userInfo.name || '点击设置昵称'}}</view>
      <view class="user-level">Lv.{{userInfo.level}} · {{userInfo.title}}</view>
      <view class="user-stats">
        <view class="stat-item">
          <text class="stat-value">{{userInfo.totalDays}}</text>
          <text class="stat-label">陪伴天数</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{userInfo.totalTasks}}</text>
          <text class="stat-label">完成任务</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{userInfo.totalExp}}</text>
          <text class="stat-label">总经验</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 宠物信息 -->
  <view class="pet-section">
    <view class="section-title">
      <image src="/images/icon-pet.png" class="title-icon" />
      <text>我的宠物</text>
    </view>
    <view class="pet-card" bindtap="editPet">
      <view class="pet-avatar">
        <image src="{{petInfo.avatar}}" mode="aspectFill" />
      </view>
      <view class="pet-info">
        <view class="pet-name">{{petInfo.name}}</view>
        <view class="pet-level">Lv.{{petInfo.level}} · {{petInfo.type}}</view>
        <view class="pet-mood">心情：{{petInfo.mood}}</view>
      </view>
      <view class="arrow-right">
        <image src="/images/icon-arrow-right.png" />
      </view>
    </view>
  </view>

  <!-- 设置选项 -->
  <view class="settings-section">
    <view class="section-title">
      <image src="/images/icon-settings.png" class="title-icon" />
      <text>设置</text>
    </view>
    
    <!-- 通知设置 -->
    <view class="setting-group">
      <view class="group-title">通知设置</view>
      <view class="setting-item">
        <view class="item-left">
          <image src="/images/icon-notification.png" class="item-icon" />
          <text class="item-title">任务提醒</text>
        </view>
        <switch checked="{{settings.taskNotification}}" bindchange="onTaskNotificationChange" color="#A3D39C" />
      </view>
      <view class="setting-item">
        <view class="item-left">
          <image src="/images/icon-water.png" class="item-icon" />
          <text class="item-title">饮水提醒</text>
        </view>
        <switch checked="{{settings.waterReminder}}" bindchange="onWaterReminderChange" color="#A3D39C" />
      </view>
      <view class="setting-item">
        <view class="item-left">
          <image src="/images/icon-sleep.png" class="item-icon" />
          <text class="item-title">睡眠提醒</text>
        </view>
        <switch checked="{{settings.sleepReminder}}" bindchange="onSleepReminderChange" color="#A3D39C" />
      </view>
    </view>

    <!-- 隐私设置 -->
    <view class="setting-group">
      <view class="group-title">隐私设置</view>
      <view class="setting-item">
        <view class="item-left">
          <image src="/images/icon-data.png" class="item-icon" />
          <text class="item-title">数据同步</text>
        </view>
        <switch checked="{{settings.dataSync}}" bindchange="onDataSyncChange" color="#A3D39C" />
      </view>
      <view class="setting-item" bindtap="openPrivacyPolicy">
        <view class="item-left">
          <image src="/images/icon-privacy.png" class="item-icon" />
          <text class="item-title">隐私政策</text>
        </view>
        <view class="arrow-right">
          <image src="/images/icon-arrow-right.png" />
        </view>
      </view>
    </view>

    <!-- 应用设置 -->
    <view class="setting-group">
      <view class="group-title">应用设置</view>
      <view class="setting-item" bindtap="openThemeSettings">
        <view class="item-left">
          <image src="/images/icon-theme.png" class="item-icon" />
          <text class="item-title">主题设置</text>
        </view>
        <view class="item-right">
          <text class="item-value">{{settings.theme}}</text>
          <view class="arrow-right">
            <image src="/images/icon-arrow-right.png" />
          </view>
        </view>
      </view>
      <view class="setting-item" bindtap="openLanguageSettings">
        <view class="item-left">
          <image src="/images/icon-language.png" class="item-icon" />
          <text class="item-title">语言设置</text>
        </view>
        <view class="item-right">
          <text class="item-value">{{settings.language}}</text>
          <view class="arrow-right">
            <image src="/images/icon-arrow-right.png" />
          </view>
        </view>
      </view>
      <view class="setting-item" bindtap="clearCache">
        <view class="item-left">
          <image src="/images/icon-cache.png" class="item-icon" />
          <text class="item-title">清理缓存</text>
        </view>
        <view class="item-right">
          <text class="item-value">{{cacheSize}}</text>
          <view class="arrow-right">
            <image src="/images/icon-arrow-right.png" />
          </view>
        </view>
      </view>
    </view>

    <!-- 关于应用 -->
    <view class="setting-group">
      <view class="group-title">关于</view>
      <view class="setting-item" bindtap="checkUpdate">
        <view class="item-left">
          <image src="/images/icon-update.png" class="item-icon" />
          <text class="item-title">检查更新</text>
        </view>
        <view class="item-right">
          <text class="item-value">v{{appVersion}}</text>
          <view class="arrow-right">
            <image src="/images/icon-arrow-right.png" />
          </view>
        </view>
      </view>
      <view class="setting-item" bindtap="openAbout">
        <view class="item-left">
          <image src="/images/icon-about.png" class="item-icon" />
          <text class="item-title">关于我们</text>
        </view>
        <view class="arrow-right">
          <image src="/images/icon-arrow-right.png" />
        </view>
      </view>
      <view class="setting-item" bindtap="openFeedback">
        <view class="item-left">
          <image src="/images/icon-feedback.png" class="item-icon" />
          <text class="item-title">意见反馈</text>
        </view>
        <view class="arrow-right">
          <image src="/images/icon-arrow-right.png" />
        </view>
      </view>
    </view>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">退出登录</button>
  </view>
</view>

<!-- 编辑用户信息弹窗 -->
<view class="edit-modal" wx:if="{{showEditModal}}">
  <view class="modal-mask" bindtap="hideEditModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">编辑个人信息</text>
      <button class="modal-close" bindtap="hideEditModal">
        <image src="/images/icon-close.png" />
      </button>
    </view>
    <view class="modal-body">
      <view class="input-group">
        <text class="input-label">昵称</text>
        <input class="user-input" value="{{editUserInfo.name}}" placeholder="请输入昵称" bindinput="onNameInput" />
      </view>
      <view class="input-group">
        <text class="input-label">个性签名</text>
        <textarea class="user-textarea" value="{{editUserInfo.signature}}" placeholder="请输入个性签名" bindinput="onSignatureInput" maxlength="50"></textarea>
      </view>
    </view>
    <view class="modal-footer">
      <button class="modal-btn cancel" bindtap="hideEditModal">取消</button>
      <button class="modal-btn confirm" bindtap="confirmEdit">确认</button>
    </view>
  </view>
</view>